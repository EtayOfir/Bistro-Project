<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.StackedBarChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="700" prefWidth="1200" style="-fx-background-color: #f6f8fa;" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="ClientGUI.controller.ReportsUIController">

   <top>
      <HBox spacing="20" style="-fx-background-color: #2563eb;">
         <padding>
            <Insets bottom="20" left="20" right="20" top="20" />
         </padding>

         <Label style="-fx-text-fill: white; -fx-font-size: 18; -fx-font-weight: bold;" text="Reports Dashboard" />

         <Pane HBox.hgrow="ALWAYS" />

         <Button fx:id="btnBack" onAction="#onBackClicked" style="-fx-background-color: white; -fx-text-fill: #2563eb; -fx-background-radius: 6;" text="Back" />

         <Button onAction="#onExitClicked" style="-fx-background-color: #ef4444; -fx-text-fill: white; -fx-background-radius: 6;" text="Exit" />
      </HBox>
   </top>

   <center>
      <VBox spacing="15">
         <padding>
            <Insets bottom="20" left="20" right="20" top="20" />
         </padding>

         <HBox alignment="CENTER_LEFT" spacing="15.0" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8; -fx-border-color: #e5e7eb;">
            <children>
               <Label text="Generate Monthly Report" textFill="#2563eb">
                  <font>
                     <Font name="System Bold" size="16.0" />
                  </font>
               </Label>

               <Region HBox.hgrow="ALWAYS" />
               
               <Label style="-fx-font-weight: bold;" text="Month:" />
               <ComboBox fx:id="monthCombo" prefWidth="130.0" style="-fx-background-color: #f3f4f6; -fx-border-color: #d1d5db; -fx-border-radius: 4;" />

               <Label style="-fx-font-weight: bold;" text="Year:" />
               <ComboBox fx:id="yearCombo" prefWidth="100.0" style="-fx-background-color: #f3f4f6; -fx-border-color: #d1d5db; -fx-border-radius: 4;" />

               <Button fx:id="generateBtn" mnemonicParsing="false" onAction="#onGenerateReport" style="-fx-background-color: #fbbf24; -fx-text-fill: black; -fx-font-weight: bold; -fx-background-radius: 6; -fx-padding: 5 15;" text="Generate Report" />
            </children>
         </HBox>

         <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-background: #f6f8fa;" VBox.vgrow="ALWAYS">
            <content>
               <VBox spacing="20">
                  
                  <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 0);">
                     <Label style="-fx-font-weight: bold; -fx-font-size: 14;" text="Subscriber graph: orders vs. waiting (Daily View)" />
                     <LineChart fx:id="subscriberChart" prefHeight="350.0">
                        <xAxis>
                           <CategoryAxis label="Day of Month" side="BOTTOM" />
                        </xAxis>
                        <yAxis>
                           <NumberAxis label="Count" side="LEFT" />
                        </yAxis>
                     </LineChart>
                  </VBox>

                  <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 0);">
                     <Label style="-fx-font-weight: bold; -fx-font-size: 14;" text="Customer Flow: Arrivals vs Departures" />
                     <StackedBarChart fx:id="punctualityChart" prefHeight="350.0">
                        <xAxis>
                           <CategoryAxis label="Hour of Day" side="BOTTOM" />
                        </xAxis>
                        <yAxis>
                           <NumberAxis label="Number of Diners" side="LEFT" />
                        </yAxis>
                     </StackedBarChart>
                  </VBox>

                  <HBox alignment="CENTER_LEFT" spacing="20">
                     <VBox spacing="8" style="-fx-background-color: #eff6ff; -fx-padding: 15; -fx-background-radius: 8; -fx-border-color: #93c5fd; -fx-border-radius: 8;">
                        <Label style="-fx-font-weight: bold; -fx-text-fill: #1e40af;" text="Total Reservations" />
                        <Label fx:id="totalReservationsLabel" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #1e40af;" text="0" />
                     </VBox>
                     
                     <VBox spacing="8" style="-fx-background-color: #fef3c7; -fx-padding: 15; -fx-background-radius: 8; -fx-border-color: #fcd34d; -fx-border-radius: 8;">
                        <Label style="-fx-font-weight: bold; -fx-text-fill: #92400e;" text="Expired / No-Show" />
                        <Label fx:id="expiredReservationsLabel" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #92400e;" text="0" />
                     </VBox>
                     
                     <VBox spacing="8" style="-fx-background-color: #dcfce7; -fx-padding: 15; -fx-background-radius: 8; -fx-border-color: #86efac; -fx-border-radius: 8;">
                        <Label style="-fx-font-weight: bold; -fx-text-fill: #166534;" text="Confirmed" />
                        <Label fx:id="confirmedReservationsLabel" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #166534;" text="0" />
                     </VBox>

                     <VBox spacing="8" style="-fx-background-color: #dbeafe; -fx-padding: 15; -fx-background-radius: 8; -fx-border-color: #bfdbfe; -fx-border-radius: 8;">
                        <Label style="-fx-font-weight: bold; -fx-text-fill: #0c4a6e;" text="Total Guests" />
                        <Label fx:id="totalGuestsLabel" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #0c4a6e;" text="0" />
                     </VBox>
                  </HBox>

               </VBox>
            </content>
            <padding>
               <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>
         </ScrollPane>
      </VBox>
   </center>
</BorderPane>